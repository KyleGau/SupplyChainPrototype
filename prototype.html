<!DOCTYPE html>

<html lang="en-US"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Software Supply Chain Prototype</title>
<link rel="stylesheet" id="twentytwelve-style-css" target="_blank" href="./style.css" type="text/css" media="all">
</head>

<body class="home blog admin-bar no-customize-support full-width custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header class="site-header">
		
		<div class="post-container" style="height:80px">
			<div class="post-thumb" style="padding-top:10px">
					<h1 class="site-title"><a target="_blank" title="Kai Gao&#39;s Homepage" rel="home">The Structure and Evolution of Software Supply Chain</a></h1>
			</div>
		</div>
    <script src="echarts.js"></script>
	</header>

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">
										
	<article id="post-1" class="post-1 post type-post status-publish format-standard hentry category-research">

		<div class="entry-content">
			
		<div class="post-container">                
		<div class="post-content" style="text-align: justify">
			<h1 style="margin:-2px 0 0 0"> Introduction </h1>
                  		
					<p style="margin:15px 0 0 0">			
                        In the software development process, developers often reuse software written by other developers in the form of software dependencies. A large amount of software forms a complex software supply chain (SC) through project dependencies. There are many kinds of dependencies, e.g., runtime dependency, importint a software package in the program, developer dependency, etc. Here we refer to dependency as importing a software package, e.g., <code>import tensorflow as tf</code>. The number of projects involved in the software suuply chain is huge and the dependencies is complex. But there is a lack of effective modelling and analysis methods for SC, which therefore limits our understanding of software SC, e.g., the basic structure, and the maintenance and utilization of SC. In the following, we take the two most popular deep learning framework, i.e., TensorFlow and PyTorch, as a starting point to explore the modeling and analysis methods of SC. </p>

                    <p></p>
	       </div>
		</div>		

<hr>
                
<h1 style="text-align: left;margin-bottom:0px">Supply chain construction</h1>
<p>We mainly use two data sources, <a href="https://worldofcode.org/">World of Code (WoC)</a> and <a href="https://libraries.io/">Libraries.io</a>, to construct TensorFlow SC and PyTorch SC.</p>
<p>WoC is an infrastructure for mining the universe of open source version control system (VCS) data. It collects <a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">Git objects</a> of open source repositories across code hosting platforms, curates the collected data by, for example, deforking repositories and parsing dependencies from each version of source code files (technical dependencies), and provides a variety of ways to query the data. We use <a href="https://github.com/woc-hack/tutorial\#activity-6-investigating-technical-dependencies">WoC query</a> to obtain the package import relationships. The format of a technical dependency record is: <code>commit;repository excluding forks;timestamp;author;blob;language used in WoC;language determined by <a href="https://github.com/universal-ctags/ctags">ctags</a>;filename;modules separated by semicolon</code>. We use version Q of WoC which collects data up to 2019.12. An example technical dependency record which imported TensorFlow is:</p> 
<figure>
  <div align="center">
    <img src="./imgs/dependency.jpg" width="500" />
    <figcaption>An example record of WoC technical dependency map</figcaption>
  </div>
</figure>
<!-- <div align="center"><img src="./imgs/dependency.jpg" width="500" /></div> -->
<p>Libraries.io dataset tracks over 2.7m unique open source packages, 33m projects and 235m inter dependencies between them. We downloaded its latest version: January, 2020. We use this dataset to identify which projects in a layer of the SC have released packages and the information about these packages to build the SC.</p>
<p>The construction process is as following figure:</p>
<figure>
  <div align="center">
    <img src="./imgs/construction.jpg" width="500" />
    <figcaption>An overview of supply chain construction process</figcaption>
  </div>
</figure>
<ol>
    <li>Start from a DL framework, i.e., TensorFlow or PyTorch, query WoC to obtain all projects (noted as &Rho;) that import them (For TensorFlow, its import name is <code>tensorflow</code>; for PyTorch its import name is <code>torch</code>)</li>
    <li>Search Libraries.io to find packages in &Rho;. As package's import name may be different from package's name, e.g., PyTorch's import name is torch. We therefore manually label the import name of packages by referring to their homepage and code.</li>
    <li>For each import name, we search WoC to obtain their downstream projects that import this package to build the next layer of DL SC.</li>
    <li>Repeat this process until the projects in the last/highest layer do not have new packages released, or the packages have no downstream projects.</li>
</ol>
<style>
  .alert {
    padding: 6px;
    background-color: #a093cf;
    color: white;
  }
</style>
  
<div class="alert">
  <strong>Note: </strong> 
  <ol>
    <li>One project may import a certain package multiple times. For this case, we only retain the first import time to represent the establishment time of the reference relationship</li>
    <li>For a package with multiple versions, its earlier versions may not import any package in the DL SC, but at time <i>T</i>, it imported. When we obtain the downstream projects of this package, we only retain the downstream projects whose import time is later than <i>T</i>.</li>
    <li>A project may import the packages at different levels. For this case, we classify it as a higher-layer project. For example, if a project imports packages located at both the second layer and the third layer, we consider this project to be at the fourth (3+1) layer.</li>
  </ol>
</div>

<h1 style="text-align: left;margin-bottom:0px">Supply chain structure</h1>
<h2 style="text-align: left;margin-bottom:0px">Structure</h2>
<table border 1px solid style="margin: auto;font-size: large;width: 50%;">
    <caption align="bottom" style="text-align: center;">Basic information of TensorFlow SC and PyTorch SC</caption>
    <tr> <th></th> <th>TensorFlow</th> <th>PyTorch</th> </tr>
    <tr> <td>Start Time</td> <td>2015.11</td> <td>2017.03</td> </tr>
    <tr> <td>End Time</td> <td>2019.10</td> <td>2019.10</td> </tr>
    <tr> <td>#Projects (nodes)</td> <td>355,392</td> <td>136,507</td> </tr>
    <tr> <td>#Packages</td> <td>1,022</td> <td>697</td> </tr>
    <tr> <td>#Import relationship (edges)</td> <td>369,201</td> <td>152,059</td> </tr>
    <tr> <td>#Layers</td> <td>6</td> <td>5</td> </tr>
    <tr> <td>#Projects with downstream</td> <td>614</td> <td>418</td> </tr>
</table>
<ul>
  <li>Both TensorFlow and PyTorch SCs have substantial projects, i.e., 355,392 and 136,507 respectively.</li>
  <li>Both SCs are short, with only six or five layers, which indicates that the length of SCs can not grow indefinitely.</li>
  <li>Only a few projects have released packages, for TensorFlow SC, 0.29% projects are packages, and for PyTorch, that is 0.51%, indicating that that almost all the projects in the DL SCs are use-oriented</li>
  <li>A significant number of these packages are not referenced by any project, for TensorFlow SC, 33.9% packages don't have downstream projects, for PyTorch, that is 40.0%</li>
</ul>
<p>The following table shows the project dependencies in TensorFlow SC and PyTorch SC.</p>
<ul>
  <li>Most of the projects (TensorFlow SC: 89.23%; PyTorch SC: 82.43%) are distributed in the second layer, i.e., directly dependent on TensorFlow or PyTorch.</li>
  <li>Except for the first layer, the number of projects in each layer decreases with the increase of the number of layers, which indicates that with the increase of DL SC layer, it seems more difficult to attract downstream projects.</li>
  <li>For most of layers, instead importing different layers of packages to work together, projects seem to be more likely to only import packages published by the project immediately above them except the third layer of PyTorch SC</li>
</ul>
<style type="text/css">
    .tg {
        margin: auto;
        font-size: large;
        width: 100%;
    }
    .tg td{
      text-align: center;
      vertical-align: middle;
      border: 1pt solid;

    }
    .tg th{
        text-align: center;
        border: 1pt solid;
    }


</style>
<table class="tg">
  <tr><th colspan="3">TensorFlow</th><th colspan="3">PyTorch</th>
   <tr><td>Project Layer</td><td>Layers of<br/>Dependent Projects</td><td>Count</td><td>Project Layer</td><td>Layers of<br/>Dependent Projects</td><td>Count</td></tr>
   <tr><td>1</td><td>/</td><td>1</td><td>1</td><td>/</td><td>1</td></tr>
   <tr><td>2</td><td>1</td><td>317,115</td><td>2</td><td>1</td><td>112,516</td></tr>
   <tr><td rowspan="2">3</td><td>2</td><td>23,323</td><td rowspan="2">3</td><td>2</td><td>8,072</td></tr>
   <tr><td>1, 2</td><td>12,252</td><td>1, 2</td><td>15,255</td></tr>
   <tr><td rowspan="4">4</td><td>3</td><td>1,268</td><td rowspan="4">4</td><td>3</td><td>422</td></tr>
   <tr><td>1, 3</td><td>500</td><td>1, 3</td><td>28</td></tr>
   <tr><td>2, 3</td><td>348</td><td>2, 3</td><td>104</td></tr>
   <tr><td>1, 2, 3</td><td>321</td><td>1, 2, 3</td><td>81</td></tr>
   <tr><td rowspan="8">5</td><td>4</td><td>211</td><td rowspan="3">5</td><td>4</td><td>24</td></tr>
   <tr><td>1, 4</td><td>3</td><td>1, 4</td><td>1</td></tr>
   <tr><td>2, 4</td><td>3</td><td>3, 4</td><td>3</td></tr>
   <tr style="border-right: 0pt solid;"><td>3, 4</td><td>34</td></tr>
   <tr style="border-right: 0pt solid;"><td>1, 2, 4</td><td>6</td></tr>
   <tr style="border-right: 0pt solid;"><td>1, 3, 4</td><td>1</td></td></tr>
   <tr style="border-right: 0pt solid;"><td>2, 3, 4</td><td>1</td></td></tr>
   <tr style="border-right: 0pt solid;"><td>1, 2, 3, 4</td><td>4</td></td></tr>
   <tr style="border-right: 0pt solid;"><td>6</td><td>5</td><td>1</td></tr>
</table>

<h2 style="text-align: left;margin-bottom:0px">Evolution</h2>


<h2 style="text-align: left;margin-bottom:0px">Vulnerabilities</h2>

<div id="chart1" style="width:750px; height:500px;text-align: center;margin: auto;">
    <script type="text/javascript">
      // 基于准备好的dom，初始化echarts实例
      var chartDom = document.getElementById('chart1');
var myChart = echarts.init(chartDom);
var option;

option = {
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'cross',
      crossStyle: {
        color: '#999'
      }
    }
  },
  toolbox: {
    feature: {
      dataView: { show: true, readOnly: false },
      magicType: { show: true, type: ['line', 'bar'] },
      restore: { show: true },
      saveAsImage: { show: true }
    }
  },
  legend: {
    data: ['Evaporation', 'Precipitation', 'Temperature']
  },
  xAxis: [
    {
      type: 'category',
      data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
      axisPointer: {
        type: 'shadow'
      }
    }
  ],
  yAxis: [
    {
      type: 'value',
      name: 'Precipitation',
      min: 0,
      max: 250,
      interval: 50,
      axisLabel: {
        formatter: '{value} ml'
      }
    },
    {
      type: 'value',
      name: 'Temperature',
      min: 0,
      max: 25,
      interval: 5,
      axisLabel: {
        formatter: '{value} °C'
      }
    }
  ],
  series: [
    {
      name: 'Evaporation',
      type: 'bar',
      data: [
        2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3
      ]
    },
    {
      name: 'Precipitation',
      type: 'bar',
      data: [
        2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3
      ]
    },
    {
      name: 'Temperature',
      type: 'line',
      yAxisIndex: 1,
      data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]
    }
  ]
};

option && myChart.setOption(option);
    </script>
</div>

</div><!-- .entry-content -->


</article><!-- #post -->
</div><!-- #content -->
</div><!-- #primary -->



</body></html>